import{_ as n,C as l,c as e,o as t,j as a,G as p,ai as h,a as k}from"./chunks/framework.6CbiclxB.js";const u=JSON.parse('{"title":"搭建 ZooKeeper 3 节点集群（Docker Compose，自定义网络）","description":"","frontmatter":{},"headers":[],"relativePath":"articles/java/middle-frame/ZK集群.md","filePath":"articles/java/middle-frame/ZK集群.md","lastUpdated":1768136749000}'),r={name:"articles/java/middle-frame/ZK集群.md"};function d(o,s,E,c,g,y){const i=l("ArticleMetadata");return t(),e("div",null,[s[0]||(s[0]=a("h1",{id:"搭建-zookeeper-3-节点集群-docker-compose-自定义网络",tabindex:"-1"},[k("搭建 ZooKeeper 3 节点集群（Docker Compose，自定义网络） "),a("a",{class:"header-anchor",href:"#搭建-zookeeper-3-节点集群-docker-compose-自定义网络","aria-label":'Permalink to "搭建 ZooKeeper 3 节点集群（Docker Compose，自定义网络）"'},"​")],-1)),p(i),s[1]||(s[1]=h(`<h2 id="_1-准备工作" tabindex="-1">1. 准备工作 <a class="header-anchor" href="#_1-准备工作" aria-label="Permalink to &quot;1. 准备工作&quot;">​</a></h2><ul><li>安装 Docker 与 Docker Compose。</li><li>拉取镜像：<code>docker pull zookeeper:3.5.6</code>。</li><li>创建数据目录：</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./zk-cluster/data/{zk1,zk2,zk3}</span></span></code></pre></div><ul><li>注意事项： <ul><li>ZooKeeper 节点间通信需使用<strong>服务名</strong>而非 IP，否则 leader 选举和节点识别可能失败。</li><li>Docker 默认桥接网络可用，但建议自定义 <code>bridge</code> 网络避免 IP 冲突。</li></ul></li></ul><hr><h2 id="_2-docker-compose-配置示例-修正-zoo-servers-格式" tabindex="-1">2. Docker Compose 配置示例（修正 ZOO_SERVERS 格式） <a class="header-anchor" href="#_2-docker-compose-配置示例-修正-zoo-servers-格式" aria-label="Permalink to &quot;2. Docker Compose 配置示例（修正 ZOO_SERVERS 格式）&quot;">​</a></h2><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;3&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  zk1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zookeeper:3.5.6</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zk1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      zk_net</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        ipv4_address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">172.28.0.101</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2181:2181&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./data/zk1:/data</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ZOO_MY_ID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ZOO_SERVERS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">server.1=zk1:2888:3888;2181 server.2=zk2:2888:3888;2181 server.3=zk3:2888:3888;2181</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ZOO_4LW_COMMANDS_WHITELIST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">stat,ruok,mntr</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  zk2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zookeeper:3.5.6</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zk2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      zk_net</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        ipv4_address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">172.28.0.102</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2182:2181&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./data/zk2:/data</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ZOO_MY_ID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ZOO_SERVERS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">server.1=zk1:2888:3888;2181 server.2=zk2:2888:3888;2181 server.3=zk3:2888:3888;2181</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ZOO_4LW_COMMANDS_WHITELIST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">stat,ruok,mntr</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  zk3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zookeeper:3.5.6</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zk3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      zk_net</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        ipv4_address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">172.28.0.103</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2183:2181&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./data/zk3:/data</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ZOO_MY_ID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ZOO_SERVERS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">server.1=zk1:2888:3888;2181 server.2=zk2:2888:3888;2181 server.3=zk3:2888:3888;2181</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ZOO_4LW_COMMANDS_WHITELIST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">stat,ruok,mntr</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  zk_net</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bridge</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ipam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">subnet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">172.28.0.0/16</span></span></code></pre></div><ul><li>启动集群：<code>docker-compose up -d</code></li><li>检查日志：<code>docker logs zk1</code> 确认 Leader 选举完成。</li></ul><hr><h2 id="_3-核心端口说明" tabindex="-1">3. 核心端口说明 <a class="header-anchor" href="#_3-核心端口说明" aria-label="Permalink to &quot;3. 核心端口说明&quot;">​</a></h2><table tabindex="0"><thead><tr><th>端口</th><th>含义</th><th>用途</th></tr></thead><tbody><tr><td>2181</td><td>clientPort</td><td>客户端连接端口</td></tr><tr><td>2888</td><td>peerPort</td><td>Follower 与 Leader 同步及心跳</td></tr><tr><td>3888</td><td>leaderPort</td><td>Leader 选举通信</td></tr></tbody></table><hr><h2 id="_4-集群状态验证" tabindex="-1">4. 集群状态验证 <a class="header-anchor" href="#_4-集群状态验证" aria-label="Permalink to &quot;4. 集群状态验证&quot;">​</a></h2><h3 id="连接与四字命令" tabindex="-1">连接与四字命令 <a class="header-anchor" href="#连接与四字命令" aria-label="Permalink to &quot;连接与四字命令&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 连接 zk1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zk1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zkCli.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zk1:2181</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看节点状态</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> nc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2181</span></span></code></pre></div><ul><li>注意：ZooKeeper 3.5+ 默认禁用四字命令，需通过 <code>ZOO_4LW_COMMANDS_WHITELIST</code> 环境变量启用。</li></ul><h3 id="日志示例" tabindex="-1">日志示例 <a class="header-anchor" href="#日志示例" aria-label="Permalink to &quot;日志示例&quot;">​</a></h3><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[LearnerHandler-/172.28.0.101:44212] - Synchronizing with Follower sid: 1</span></span>
<span class="line"><span>[QuorumPeer[myid=3]] - Have quorum of supporters, starting up leader</span></span></code></pre></div><hr><h2 id="_5-文件与节点管理" tabindex="-1">5. 文件与节点管理 <a class="header-anchor" href="#_5-文件与节点管理" aria-label="Permalink to &quot;5. 文件与节点管理&quot;">​</a></h2><h3 id="数据目录" tabindex="-1">数据目录 <a class="header-anchor" href="#数据目录" aria-label="Permalink to &quot;数据目录&quot;">​</a></h3><ul><li>每个节点 <code>./data/zk{1,2,3}</code> 对应容器 <code>/data</code>。</li><li><code>myid</code> 文件放在 <code>/data/myid</code>，内容为节点 ID（1/2/3）。</li></ul><h3 id="节点操作示例" tabindex="-1">节点操作示例 <a class="header-anchor" href="#节点操作示例" aria-label="Permalink to &quot;节点操作示例&quot;">​</a></h3><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 创建持久节点</span></span>
<span class="line"><span>create /myapp &quot;hello world&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 创建子节点</span></span>
<span class="line"><span>create /myapp/config &quot;{\\&quot;db_url\\&quot;: \\&quot;localhost:3306\\&quot;, \\&quot;timeout\\&quot;: 30}&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 创建临时节点</span></span>
<span class="line"><span>create -e /myapp/temp_node &quot;temporary data&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 创建顺序节点</span></span>
<span class="line"><span>create -s /myapp/worker &quot;worker_1&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查看节点</span></span>
<span class="line"><span>ls /</span></span>
<span class="line"><span>ls /myapp</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 获取节点数据</span></span>
<span class="line"><span>get /myapp</span></span></code></pre></div><ul><li><code>-e</code>：临时节点</li><li><code>-s</code>：顺序节点</li></ul><hr><h2 id="_6-集群常见问题及修复" tabindex="-1">6. 集群常见问题及修复 <a class="header-anchor" href="#_6-集群常见问题及修复" aria-label="Permalink to &quot;6. 集群常见问题及修复&quot;">​</a></h2><table tabindex="0"><thead><tr><th>问题</th><th>原因</th><th>解决方案</th></tr></thead><tbody><tr><td>单节点可用，集群模式拒绝连接</td><td>ZOO_SERVERS 环境变量格式错误</td><td>使用 <code>server.X=zkX:2888:3888;2181</code> 格式</td></tr><tr><td>stat 命令不可用</td><td>四字命令默认禁用</td><td>添加 <code>ZOO_4LW_COMMANDS_WHITELIST: stat,ruok,mntr</code></td></tr><tr><td>权限 ACL 错误</td><td>节点操作无有效 ACL</td><td>使用有效 ACL 或临时允许空 ACL（生产慎用）</td></tr><tr><td>Leader/Follower 无法选举</td><td>IP 替代服务名</td><td>使用服务名 zk1/zk2/zk3，不使用容器 IP</td></tr></tbody></table><hr><h2 id="_7-监控与管理" tabindex="-1">7. 监控与管理 <a class="header-anchor" href="#_7-监控与管理" aria-label="Permalink to &quot;7. 监控与管理&quot;">​</a></h2><ul><li><strong>Web UI</strong>：Zookeeper 原生无 Web UI <ul><li>可使用 Exhibitor 或 ZKUI</li><li>Exhibitor 配置 REST API（8080）</li></ul></li><li><strong>命令行</strong>： <ul><li><code>zkServer.sh status</code> 查看节点模式（leader/follower）</li><li><code>zkCli.sh</code> 执行四字命令或 CRUD 节点操作</li></ul></li></ul><hr><h2 id="_8-docker-网络说明" tabindex="-1">8. Docker 网络说明 <a class="header-anchor" href="#_8-docker-网络说明" aria-label="Permalink to &quot;8. Docker 网络说明&quot;">​</a></h2><ul><li>默认 <code>bridge</code> 网络：<code>172.17.0.0/16</code></li><li>自定义 bridge 网络：可指定子网，例如 <code>172.28.0.0/16</code> 避免冲突</li><li>Docker Compose 自定义网络可固定 IP，便于 ZooKeeper 节点发现与 Leader 选举</li></ul><hr><h2 id="_9-总结" tabindex="-1">9. 总结 <a class="header-anchor" href="#_9-总结" aria-label="Permalink to &quot;9. 总结&quot;">​</a></h2><ul><li>核心原则：使用服务名而非 IP，确保 <code>ZOO_SERVERS</code> 格式符合 3.5+ 规范；启用四字命令白名单；每节点 <code>myid</code> 配置正确；自定义网络保证节点互通。</li><li>常见操作：节点创建、顺序节点、临时节点、数据读取、状态检查。</li><li>集群调试关键：查看日志确认 Leader/Follower 选举，使用 <code>zkCli.sh</code> 验证节点同步。</li></ul>`,37))])}const C=n(r,[["render",d]]);export{u as __pageData,C as default};
